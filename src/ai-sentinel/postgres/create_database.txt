
-- Tabla que Flowise está intentando usar
CREATE TABLE IF NOT EXISTS public.documents (
  id uuid PRIMARY KEY,
  "pageContent" text,
  metadata jsonb,
  embedding vector(768)
);

-- Índice para búsquedas por similitud con COSINE (lo que elegiste)
CREATE INDEX IF NOT EXISTS documents_embedding_idx
ON public.documents USING ivfflat (embedding vector_cosine_ops)
WITH (lists = 100);

ANALYZE public.documents;
